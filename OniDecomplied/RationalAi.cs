// Decompiled with JetBrains decompiler
// Type: RationalAi
// Assembly: Assembly-CSharp, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: D13CBB0B-55A9-4EF0-9BB5-5C2436A6B8EE
// Assembly location: D:\dev\OniMod\Assembly-CSharp.dll

using System;
using System.Collections.Generic;
using UnityEngine;

public class RationalAi : GameStateMachine<RationalAi, RationalAi.Instance>
{
  public GameStateMachine<RationalAi, RationalAi.Instance, IStateMachineTarget, object>.State alive;
  public GameStateMachine<RationalAi, RationalAi.Instance, IStateMachineTarget, object>.State dead;

  public override void InitializeStates(out StateMachine.BaseState default_state)
  {
    default_state = (StateMachine.BaseState) this.root;
    this.root.ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new DeathMonitor.Instance(smi.master, new DeathMonitor.Def()))).Enter((StateMachine<RationalAi, RationalAi.Instance, IStateMachineTarget, object>.State.Callback) (smi =>
    {
      if (smi.HasTag(GameTags.Dead))
        smi.GoTo((StateMachine.BaseState) this.dead);
      else
        smi.GoTo((StateMachine.BaseState) this.alive);
    }));
    this.alive.TagTransition(GameTags.Dead, this.dead).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new ThoughtGraph.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new Dreamer.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new StaminaMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new StressMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new EmoteMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new SneezeMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new DecorMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new IncapacitationMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new IdleMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new RationMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new CalorieMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new DoctorMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new SicknessMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new GermExposureMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new BreathMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new RoomMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new TemperatureMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new ExternalTemperatureMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new BladderMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new SteppedInMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new LightMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new RadiationMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new RedAlertMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new CringeMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new HygieneMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new FallMonitor.Instance(smi.master, true, "anim_emotes_default_kanim"))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new ThreatMonitor.Instance(smi.master, new ThreatMonitor.Def()))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new WoundMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new TiredMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new MoveToLocationMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new RocketPassengerMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new ReactionMonitor.Instance(smi.master, new ReactionMonitor.Def()))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new SuitWearer.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new TubeTraveller.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new MingleMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new MournMonitor.Instance(smi.master))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new SpeechMonitor.Instance(smi.master, new SpeechMonitor.Def()))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new BlinkMonitor.Instance(smi.master, new BlinkMonitor.Def()))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new ConversationMonitor.Instance(smi.master, new ConversationMonitor.Def()))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new CoughMonitor.Instance(smi.master, new CoughMonitor.Def()))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new GameplayEventMonitor.Instance(smi.master, new GameplayEventMonitor.Def()))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new GasLiquidExposureMonitor.Instance(smi.master, new GasLiquidExposureMonitor.Def()))).ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new InspirationEffectMonitor.Instance(smi.master, new InspirationEffectMonitor.Def())));
    this.dead.ToggleStateMachine((Func<RationalAi.Instance, StateMachine.Instance>) (smi => (StateMachine.Instance) new FallWhenDeadMonitor.Instance(smi.master))).ToggleBrain("dead").Enter("RefreshUserMenu", (StateMachine<RationalAi, RationalAi.Instance, IStateMachineTarget, object>.State.Callback) (smi => smi.RefreshUserMenu())).Enter("DropStorage", (StateMachine<RationalAi, RationalAi.Instance, IStateMachineTarget, object>.State.Callback) (smi => smi.GetComponent<Storage>().DropAll(false, false, new Vector3(), true, (List<GameObject>) null)));
  }

  public new class Instance : 
    GameStateMachine<RationalAi, RationalAi.Instance, IStateMachineTarget, object>.GameInstance
  {
    public Instance(IStateMachineTarget master)
      : base(master)
    {
      ChoreConsumer component = this.GetComponent<ChoreConsumer>();
      component.AddUrge(Db.Get().Urges.EmoteHighPriority);
      component.AddUrge(Db.Get().Urges.EmoteIdle);
    }

    public void RefreshUserMenu() => Game.Instance.userMenu.Refresh(this.master.gameObject);
  }
}
